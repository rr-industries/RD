<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Aditi ‚ù§Ô∏è | Our Love Story</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS Reset & Base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #0a0a2a;
            --secondary-dark: #1a0033;
            --accent-purple: #330033;
            --accent-pink: #ff69b4;
            --accent-light-pink: #ff9fd0;
            --text-light: #ffffff;
            --text-gray: #e0e0e0;
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            --transition: all 0.4s ease;
            --dancing-script: 'Dancing Script', cursive;
            --poppins: 'Poppins', sans-serif;
        }

        body {
            font-family: var(--poppins);
            background: linear-gradient(135deg, var(--primary-dark), var(--secondary-dark), var(--accent-purple));
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Cinematic Opening with Stars */
        #cinematic-opening {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #0a0a2a 0%, #000000 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            transition: opacity 1.5s ease;
            overflow: hidden;
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 5s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }

        .moon {
            position: absolute;
            top: 15%;
            right: 15%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle at 30% 30%, #f5f5f5, #e0e0e0);
            border-radius: 50%;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.5);
            opacity: 0.8;
        }

        .moon::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 20px;
            width: 30px;
            height: 30px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 50%;
        }

        .cinematic-text {
            font-family: var(--dancing-script);
            font-size: 3.5rem;
            text-align: center;
            opacity: 0;
            transform: translateY(30px);
            margin: 20px 0;
            color: var(--accent-light-pink);
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
            z-index: 2;
            position: relative;
        }

        .cinematic-text.active {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 1.2s ease, transform 1.2s ease;
        }

        .cinematic-text:nth-child(3) {
            color: var(--accent-pink);
            font-size: 4rem;
        }

        /* Main Content */
        #main-content {
            opacity: 0;
            transition: opacity 1s ease;
            position: relative;
            z-index: 2;
        }

        .section {
            padding: 100px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            font-family: var(--dancing-script);
            font-size: 3.5rem;
            text-align: center;
            margin-bottom: 50px;
            color: var(--accent-light-pink);
            text-shadow: 0 0 15px rgba(255, 105, 180, 0.4);
        }

        /* Glass Cards */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid var(--glass-border);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            animation: float-card 6s ease-in-out infinite;
        }

        @keyframes float-card {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        .glass-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        /* Hero Section */
        #hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .hero-card {
            max-width: 800px;
            text-align: center;
        }

        .hero-title {
            font-family: var(--dancing-script);
            font-size: 4rem;
            color: var(--accent-pink);
            margin-bottom: 30px;
        }

        .hero-text {
            font-size: 1.5rem;
            line-height: 1.8;
            margin-bottom: 20px;
            color: var(--text-gray);
        }

        /* Journey & Reasons Sections */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .journey-card, .reason-card {
            text-align: center;
            padding: 25px 20px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--accent-pink);
        }

        .journey-text, .reason-text {
            font-size: 1.2rem;
            color: var(--text-gray);
        }

        /* Love Letter */
        #love-letter {
            max-width: 900px;
            margin: 0 auto;
        }

        .letter-content {
            font-size: 1.3rem;
            line-height: 1.8;
            color: var(--text-gray);
        }

        .letter-signature {
            font-family: var(--dancing-script);
            font-size: 2.5rem;
            text-align: right;
            margin-top: 40px;
            color: var(--accent-pink);
        }

        /* Proposal Section */
        #proposal {
            text-align: center;
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .promises-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 40px 0;
        }

        @media (max-width: 768px) {
            .promises-grid {
                grid-template-columns: 1fr;
            }
        }

        .promise-card {
            padding: 25px;
            text-align: center;
        }

        .promise-title {
            font-size: 2rem;
            color: var(--accent-pink);
            margin-bottom: 10px;
        }

        .proposal-question {
            font-family: var(--dancing-script);
            font-size: 3.5rem;
            margin: 50px 0;
            color: var(--accent-light-pink);
        }

        /* Proposal Buttons */
        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 50px;
            flex-wrap: wrap;
            position: relative;
            min-height: 150px;
        }

        .btn {
            padding: 18px 50px;
            font-size: 1.5rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            font-family: var(--poppins);
            position: relative;
            z-index: 10;
        }

        .btn-yes {
            background: linear-gradient(135deg, #00b09b, #96c93d);
            color: white;
            transform: scale(1);
            transform-origin: center;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .btn-no {
            background: linear-gradient(135deg, #ff9966, #ff5e62);
            color: white;
            position: relative;
            transition: transform 0.3s ease;
        }

        /* Teddy Display */
        .teddy-container {
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 3rem;
            z-index: 5;
            transition: all 0.3s ease;
        }

        /* Emotional Messages */
        .message-display {
            position: absolute;
            top: -150px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 105, 180, 0.15);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.2rem;
            min-width: 300px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            border: 1px solid rgba(255, 105, 180, 0.3);
        }

        .message-display.show {
            opacity: 1;
        }

        /* Emotional Popup */
        #emotional-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            backdrop-filter: blur(10px);
        }

        #emotional-popup.active {
            opacity: 1;
            pointer-events: all;
        }

        .popup-content {
            max-width: 600px;
            width: 90%;
            padding: 40px;
            text-align: center;
        }

        .popup-text {
            font-size: 1.4rem;
            line-height: 1.8;
            margin-bottom: 30px;
            color: var(--text-gray);
        }

        /* Celebration Screen */
        #celebration-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-dark), var(--accent-purple));
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
        }

        #celebration-screen.active {
            opacity: 1;
            pointer-events: all;
        }

        .celebration-heart {
            font-size: 10rem;
            color: var(--accent-pink);
            animation: heartbeat 1.2s infinite;
            margin-bottom: 40px;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .celebration-text {
            font-family: var(--dancing-script);
            font-size: 3.5rem;
            text-align: center;
            margin-bottom: 30px;
            max-width: 800px;
            color: var(--accent-light-pink);
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        /* Flowers Animation */
        #flowers-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 998;
            overflow: hidden;
        }

        .flower {
            position: absolute;
            font-size: 2rem;
            opacity: 0;
            animation: flower-fall 4s linear forwards;
        }

        @keyframes flower-fall {
            0% {
                opacity: 1;
                transform: translateY(-100px) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Flipbook Styles - Enhanced */
        #flipbook-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(10, 10, 42, 0.95), rgba(51, 0, 51, 0.95));
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1002;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s ease;
        }

        #flipbook-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .flipbook-container {
            width: 95%;
            max-width: 1300px;
            height: 90vh;
            position: relative;
            perspective: 2000px;
        }

        .book {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform: translateZ(0);
        }

        .page {
            position: absolute;
            width: 50%;
            height: 100%;
            background: linear-gradient(145deg, #fef9f3, #fffaf0);
            border-radius: 0 15px 15px 0;
            box-shadow: 
                inset 0 0 30px rgba(255, 105, 180, 0.1),
                0 5px 25px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.8);
            transform-origin: left center;
            transition: transform 1.2s cubic-bezier(0.645, 0.045, 0.355, 1.1);
            overflow: hidden;
            z-index: 1;
        }

        .page:nth-child(even) {
            border-radius: 15px 0 0 15px;
            transform-origin: right center;
            box-shadow: 
                inset 0 0 30px rgba(255, 105, 180, 0.1),
                0 5px 25px rgba(0, 0, 0, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.8);
        }

        .page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" opacity="0.05"><path d="M0,50 Q25,25 50,50 T100,50" stroke="%23330033" fill="none"/></svg>');
            pointer-events: none;
        }

        .page-content {
            width: 100%;
            height: 100%;
            padding: 50px;
            overflow-y: auto;
            background: transparent;
            position: relative;
            z-index: 2;
        }

        .page-image {
            width: 85%;
            max-width: 400px;
            border-radius: 15px;
            margin: 25px auto;
            display: block;
            box-shadow: 
                0 10px 25px rgba(0, 0, 0, 0.15),
                0 0 0 8px white,
                0 0 30px rgba(255, 105, 180, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.9);
            transform: translateY(0);
            transition: transform 0.5s ease, box-shadow 0.5s ease;
        }

        .page-image:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.2),
                0 0 0 8px white,
                0 0 40px rgba(255, 105, 180, 0.3);
        }

        .page h2 {
            font-family: var(--dancing-script);
            color: var(--accent-purple);
            font-size: 3.5rem;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            padding-bottom: 15px;
        }

        .page h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent-pink), transparent);
            border-radius: 2px;
        }

        .page p {
            color: #444;
            font-size: 1.3rem;
            line-height: 1.8;
            text-align: center;
            max-width: 700px;
            margin: 0 auto 25px;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            position: relative;
        }

        .page p::before {
            content: '‚ùù';
            position: absolute;
            top: -15px;
            left: 15px;
            font-size: 3rem;
            color: var(--accent-pink);
            opacity: 0.5;
        }

        .page p::after {
            content: '‚ùû';
            position: absolute;
            bottom: -25px;
            right: 15px;
            font-size: 3rem;
            color: var(--accent-pink);
            opacity: 0.5;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            right: 25px;
            color: var(--accent-purple);
            font-size: 1.1rem;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px 15px;
            border-radius: 20px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .page:nth-child(even) .page-number {
            left: 25px;
            right: auto;
        }

        .bookmark-ribbon {
            position: absolute;
            top: -15px;
            right: 30px;
            width: 50px;
            height: 150px;
            background: linear-gradient(to bottom, #ff69b4, #ff1493, #cc0066);
            clip-path: polygon(0 0, 100% 0, 100% 100%, 50% 85%, 0 100%);
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            filter: drop-shadow(0 5px 5px rgba(0, 0, 0, 0.2));
        }

        .bookmark-ribbon::after {
            content: '‚ù§Ô∏è';
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.5rem;
            filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.3));
        }

        .flipbook-controls {
            position: absolute;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 25px;
            z-index: 1003;
            background: rgba(0, 0, 0, 0.6);
            padding: 20px 40px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .flipbook-btn {
            padding: 15px 35px;
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-purple));
            border: none;
            color: white;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: var(--poppins);
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.3);
            position: relative;
            overflow: hidden;
        }

        .flipbook-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .flipbook-btn:hover::before {
            left: 100%;
        }

        .flipbook-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 105, 180, 0.4);
        }

        .flipbook-btn:active {
            transform: translateY(-2px);
        }

        .flipbook-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.2);
        }

        .flipbook-btn:disabled:hover::before {
            left: -100%;
        }

        .flipbook-btn i {
            font-size: 1.2rem;
        }

        .close-flipbook {
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 2.5rem;
            color: var(--accent-pink);
            cursor: pointer;
            transition: var(--transition);
            z-index: 1003;
            background: rgba(0,0,0,0.7);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(255, 105, 180, 0.3);
        }

        .close-flipbook:hover {
            transform: scale(1.2) rotate(90deg);
            background: rgba(255, 105, 180, 0.3);
            box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
        }

        .page-indicator {
            position: absolute;
            bottom: -70px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 1.3rem;
            background: rgba(0,0,0,0.6);
            padding: 12px 30px;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .page-indicator i {
            color: var(--accent-pink);
        }

        /* Auto Flip Toggle - Enhanced */
        .auto-flip-toggle {
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--accent-purple);
            margin-top: 30px;
            justify-content: center;
            font-weight: 600;
        }

        .toggle-switch {
            width: 60px;
            height: 30px;
            background: linear-gradient(135deg, #ccc, #999);
            border-radius: 30px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active {
            background: linear-gradient(135deg, #00b09b, #96c93d);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .toggle-switch.active::after {
            transform: translateX(30px);
        }

        /* Page Turn Animation */
        @keyframes pageTurn {
            0% {
                transform: rotateY(0deg);
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            }
            50% {
                transform: rotateY(-20deg);
                box-shadow: -10px 10px 30px rgba(0, 0, 0, 0.4);
            }
            100% {
                transform: rotateY(0deg);
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.3);
            }
        }

        .page-turning {
            animation: pageTurn 1.2s ease;
        }

        /* Confetti */
        #confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 20px;
            opacity: 0;
        }

        /* Back to Top Button */
        #back-to-top {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 100;
            transition: var(--transition);
            opacity: 0;
            pointer-events: none;
        }

        #back-to-top.visible {
            opacity: 1;
            pointer-events: all;
        }

        #back-to-top:hover {
            background: rgba(255, 105, 180, 0.2);
            transform: scale(1.1);
        }

        #back-to-top i {
            font-size: 1.8rem;
            color: var(--accent-pink);
        }

        /* Music Controls - Enhanced */
        .music-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 100;
        }

        .music-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .music-btn:hover {
            background: rgba(255, 105, 180, 0.2);
            transform: scale(1.1);
        }

        .music-btn i {
            font-size: 1.8rem;
            color: var(--accent-pink);
        }

        .music-btn.active {
            background: rgba(255, 105, 180, 0.3);
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.4);
        }

        .music-btn.active::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 50%;
            border: 2px solid var(--accent-pink);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.05); }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .book {
                transform: scale(0.9);
            }
            
            .page-content {
                padding: 30px;
            }
            
            .page h2 {
                font-size: 2.8rem;
            }
            
            .page p {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            .cinematic-text {
                font-size: 2.5rem;
            }
            
            .cinematic-text:nth-child(3) {
                font-size: 3rem;
            }
            
            .hero-title, .section-title, .proposal-question {
                font-size: 2.5rem;
            }
            
            .grid-container {
                grid-template-columns: 1fr;
            }
            
            .buttons-container {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .celebration-text {
                font-size: 2.5rem;
                padding: 0 20px;
            }
            
            .celebration-heart {
                font-size: 7rem;
            }
            
            .letter-content {
                font-size: 1.1rem;
            }
            
            .page {
                width: 100%;
                border-radius: 15px !important;
            }
            
            .page:nth-child(even) {
                display: none;
            }
            
            .flipbook-container {
                height: 75vh;
            }
            
            .message-display {
                min-width: 250px;
                font-size: 1rem;
                top: -120px;
            }
            
            .teddy-container {
                font-size: 2.5rem;
                top: -60px;
            }
            
            .flipbook-controls {
                bottom: -120px;
                padding: 15px 25px;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .flipbook-btn {
                padding: 12px 25px;
                font-size: 1rem;
            }
            
            .page-indicator {
                bottom: -90px;
                padding: 10px 20px;
            }
            
            #back-to-top {
                bottom: 30px;
                right: 20px;
                width: 50px;
                height: 50px;
            }
            
            .music-controls {
                bottom: 30px;
                right: 20px;
            }
            
            .music-btn {
                width: 50px;
                height: 50px;
            }
            
            .music-btn i {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .cinematic-text {
                font-size: 2rem;
                padding: 0 20px;
            }
            
            .proposal-question {
                font-size: 2rem;
            }
            
            .btn {
                padding: 15px 30px;
                font-size: 1.3rem;
            }
            
            .page-content {
                padding: 20px;
            }
            
            .page h2 {
                font-size: 2.2rem;
            }
            
            .page p {
                font-size: 1rem;
                padding: 12px 18px;
            }
            
            .flipbook-controls {
                gap: 15px;
            }
            
            .close-flipbook {
                top: 15px;
                right: 15px;
                width: 50px;
                height: 50px;
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Cinematic Opening with Stars -->
    <div id="cinematic-opening">
        <div class="stars" id="stars-container"></div>
        <div class="moon"></div>
        <div class="cinematic-text">Every love story is special‚Ä¶</div>
        <div class="cinematic-text">But this one is my favorite.</div>
        <div class="cinematic-text">Because it's ours‚Ä¶ Aditi ‚ù§Ô∏è</div>
    </div>

    <!-- Main Content -->
    <div id="main-content">
        <!-- Hero Section -->
        <section id="hero" class="section">
            <div class="glass-card hero-card">
                <h1 class="hero-title">Happy Propose Day, Aditi ‚ù§Ô∏è</h1>
                <p class="hero-text">You didn't just come into my life‚Ä¶</p>
                <p class="hero-text">You brought calm into my chaos.</p>
                <p class="hero-text">You became my peace, my happiness, and my home.</p>
            </div>
        </section>

        <!-- Journey Section -->
        <section class="section">
            <h2 class="section-title">Our Journey</h2>
            <div class="grid-container">
                <div class="glass-card journey-card">
                    <div class="icon">üí¨</div>
                    <p class="journey-text">"When we first started talking‚Ä¶ something felt different"</p>
                </div>
                <div class="glass-card journey-card">
                    <div class="icon">üòÇ</div>
                    <p class="journey-text">"The random laughs that made everything lighter"</p>
                </div>
                <div class="glass-card journey-card">
                    <div class="icon">ü§ó</div>
                    <p class="journey-text">"The small fights that made us understand each other more"</p>
                </div>
                <div class="glass-card journey-card">
                    <div class="icon">üïäÔ∏è</div>
                    <p class="journey-text">"The comfort of your presence"</p>
                </div>
                <div class="glass-card journey-card">
                    <div class="icon">üíù</div>
                    <p class="journey-text">"The memories that became my favorites"</p>
                </div>
                <div class="glass-card journey-card">
                    <div class="icon">‚ú®</div>
                    <p class="journey-text">"Every moment with you feels real and peaceful"</p>
                </div>
            </div>
            <p style="text-align: center; font-size: 1.5rem; margin-top: 50px; color: var(--accent-light-pink);">
                Somewhere between those moments‚Ä¶ you became my favorite person.
            </p>
        </section>

        <!-- Love Letter Section -->
        <section class="section">
            <h2 class="section-title">My Love Letter</h2>
            <div id="love-letter" class="glass-card">
                <div class="letter-content">
                    <p>My Dearest Aditi,</p>
                    <br>
                    <p>I want you to know that what I feel for you comes from a place of deep respect and admiration. You are not just someone I love; you are someone I genuinely cherish as a person.</p>
                    <br>
                    <p>With you, I've found a comfort I never knew existed. A comfort that doesn't ask you to change, doesn't seek to limit you, and doesn't try to mold you into anything other than who you are. I love you precisely as you are ‚Äì with all your beautiful complexities, your strength, your gentleness, and your incredible spirit.</p>
                    <br>
                    <p>What I want most is to make your world feel lighter. To be someone you can turn to without hesitation, someone who supports your dreams, respects your independence, and celebrates your individuality. Your happiness matters to me more than anything.</p>
                    <br>
                    <p>There's no pressure in what I'm asking, only an honest expression of what's in my heart. Whatever path you choose, I will always respect your feelings and your right to choose what's best for you.</p>
                    <br>
                    <p>You are already complete, and I don't want to change a single thing about you. I just want to walk beside you, if you'll let me.</p>
                </div>
                <div class="letter-signature">
                    Aditi, I love you. ‚ù§Ô∏è
                </div>
            </div>
        </section>

        <!-- Reasons Section -->
        <section class="section">
            <h2 class="section-title">Why I Love You</h2>
            <div class="grid-container">
                <div class="glass-card reason-card">
                    <div class="icon">üòä</div>
                    <p class="reason-text">"Your smile heals my worst days"</p>
                </div>
                <div class="glass-card reason-card">
                    <div class="icon">üí≠</div>
                    <p class="reason-text">"You understand me without judging"</p>
                </div>
                <div class="glass-card reason-card">
                    <div class="icon">üïäÔ∏è</div>
                    <p class="reason-text">"You bring peace into my life"</p>
                </div>
                <div class="glass-card reason-card">
                    <div class="icon">‚≠ê</div>
                    <p class="reason-text">"You make me a better person"</p>
                </div>
                <div class="glass-card reason-card">
                    <div class="icon">üè°</div>
                    <p class="reason-text">"Your presence feels like home"</p>
                </div>
                <div class="glass-card reason-card">
                    <div class="icon">üåÖ</div>
                    <p class="reason-text">"You make life feel lighter"</p>
                </div>
            </div>
        </section>

        <!-- Proposal Section -->
        <section id="proposal" class="section">
            <div class="glass-card" style="max-width: 800px; margin: 0 auto;">
                <h2 class="section-title">My Promise to You</h2>
                <p style="font-size: 1.5rem; margin-bottom: 30px; color: var(--text-gray);">
                    I don't promise a perfect life.<br>
                    I don't promise no problems.
                </p>
                
                <div class="promises-grid">
                    <div class="glass-card promise-card">
                        <h3 class="promise-title">Respect</h3>
                        <p>I will always respect you, your boundaries, and your individuality.</p>
                    </div>
                    <div class="glass-card promise-card">
                        <h3 class="promise-title">Trust</h3>
                        <p>I will build a foundation of trust and honesty between us.</p>
                    </div>
                    <div class="glass-card promise-card">
                        <h3 class="promise-title">Freedom</h3>
                        <p>I will never try to change or limit who you are.</p>
                    </div>
                    <div class="glass-card promise-card">
                        <h3 class="promise-title">Support</h3>
                        <p>I will always be there to support your dreams and growth.</p>
                    </div>
                </div>
                
                <h3 class="proposal-question">Aditi‚Ä¶<br>Will you choose this journey with me? ‚ù§Ô∏è</h3>
                
                <div class="buttons-container">
                    <div class="teddy-container" id="teddy">üêª</div>
                    <div class="message-display" id="message-display"></div>
                    <button id="yes-btn" class="btn btn-yes">YES ‚ù§Ô∏è</button>
                    <button id="no-btn" class="btn btn-no">NO üôà</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Emotional Popup -->
    <div id="emotional-popup">
        <div class="glass-card popup-content">
            <h2 class="section-title" style="margin-bottom: 30px;">Aditi</h2>
            <div class="popup-text">
                <p>Whatever your answer is,</p>
                <p>you will always be important to me ‚ù§Ô∏è</p>
            </div>
            <div class="buttons-container" style="position: static; margin-top: 30px;">
                <button id="popup-yes-btn" class="btn btn-yes">Yes ‚ù§Ô∏è</button>
                <button id="popup-close-btn" class="btn btn-no">Close</button>
            </div>
        </div>
    </div>

    <!-- Celebration Screen -->
    <div id="celebration-screen">
        <div class="celebration-heart">‚ù§Ô∏è</div>
        <h2 class="celebration-text" id="celebration-message">You just made my world brighter ‚ù§Ô∏è</h2>
        <button id="flipbook-btn" class="btn btn-yes" style="margin-top: 30px;">Read Our Story</button>
    </div>

    <!-- Flowers Container -->
    <div id="flowers-container"></div>

    <!-- Flipbook -->
    <div id="flipbook-overlay">
        <div class="close-flipbook" id="close-flipbook">‚úï</div>
        <div class="flipbook-container">
            <div class="bookmark-ribbon"></div>
            <div class="book" id="book">
                <!-- Page 1 (Cover) -->
                <div class="page active" id="page-1">
                    <div class="page-content">
                        <h2>For Aditi ‚ù§Ô∏è</h2>
                        <img src="img10.jpeg" class="page-image" alt="Our Love Story">
                        <p>A collection of memories and moments that mean the world to me.</p>
                        <div class="page-number">1</div>
                    </div>
                </div>
                
                <!-- Page 2 -->
                <div class="page" id="page-2">
                    <div class="page-content">
                        <h2>The Beginning</h2>
                        <img src="img1.jpeg" class="page-image" alt="Our Beginning">
                        <p>When our paths crossed and everything changed forever. The moment I knew you were special.</p>
                        <div class="page-number">2</div>
                    </div>
                </div>
                
                <!-- Page 3 -->
                <div class="page" id="page-3">
                    <div class="page-content">
                        <h2>First Conversations</h2>
                        <img src="img4.jpeg" class="page-image" alt="Our Conversations">
                        <p>Words turning into comfort, understanding, and connection. Every message felt like a new discovery.</p>
                        <div class="page-number">3</div>
                    </div>
                </div>
                
                <!-- Page 4 -->
                <div class="page" id="page-4">
                    <div class="page-content">
                        <h2>Our Laughs</h2>
                        <img src="img7.jpeg" class="page-image" alt="Our Laughter">
                        <p>Shared joy that made every moment brighter and lighter. Your laughter became my favorite sound.</p>
                        <div class="page-number">4</div>
                    </div>
                </div>
                
                <!-- Page 5 -->
                <div class="page" id="page-5">
                    <div class="page-content">
                        <h2>Special Moments</h2>
                        <img src="img6.jpeg" class="page-image" alt="Special Moments">
                        <p>Those little moments that became my favorite memories. Each one a treasure in my heart.</p>
                        <div class="page-number">5</div>
                    </div>
                </div>
                
                <!-- Page 6 -->
                <div class="page" id="page-6">
                    <div class="page-content">
                        <h2>Beautiful Memories</h2>
                        <img src="img12.jpeg" class="page-image" alt="Beautiful Memories">
                        <p>Every memory with you feels like a beautiful dream I never want to wake up from.</p>
                        <div class="page-number">6</div>
                    </div>
                </div>
                
                <!-- Page 7 -->
                <div class="page" id="page-7">
                    <div class="page-content">
                        <h2>Comfort & Understanding</h2>
                        <img src="img11.jpeg" class="page-image" alt="Comfort & Understanding">
                        <p>Finding peace in your presence and understanding in your eyes. A safe haven in your arms.</p>
                        <div class="page-number">7</div>
                    </div>
                </div>
                
                <!-- Page 8 -->
                <div class="page" id="page-8">
                    <div class="page-content">
                        <h2>You Became My Peace</h2>
                        <img src="img15.jpeg" class="page-image" alt="You Became My Peace">
                        <p>In your arms, I found the calm I never knew I needed. You became my sanctuary.</p>
                        <div class="page-number">8</div>
                    </div>
                </div>
                
                <!-- Page 9 -->
                <div class="page" id="page-9">
                    <div class="page-content">
                        <h2>The Proposal</h2>
                        <img src="img13.jpeg" class="page-image" alt="The Proposal">
                        <p>This moment, asking you to be mine forever. The beginning of our forever journey.</p>
                        <div class="page-number">9</div>
                    </div>
                </div>
                
                <!-- Page 10 -->
                <div class="page" id="page-10">
                    <div class="page-content">
                        <h2>Our Story Continues‚Ä¶</h2>
                        <img src="img8.jpeg" class="page-image" alt="Our Future">
                        <p>Future chapters waiting to be written together. Our story is just beginning ‚ù§Ô∏è</p>
                        <div class="auto-flip-toggle">
                            <span>Auto Flip:</span>
                            <div class="toggle-switch" id="auto-flip-toggle"></div>
                        </div>
                        <div class="page-number">10</div>
                    </div>
                </div>
            </div>
            
            <div class="page-indicator" id="page-indicator">
                <i class="fas fa-book-open"></i>
                <span>Page 1-2 of 10</span>
            </div>
            <div class="flipbook-controls">
                <button id="prev-page" class="flipbook-btn">
                    <i class="fas fa-arrow-left"></i>
                    Previous
                </button>
                <button id="next-page" class="flipbook-btn">
                    Next
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confetti-container"></div>

    <!-- Back to Top Button -->
    <div id="back-to-top">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- Music Controls -->
    <div class="music-controls">
        <div class="music-btn" id="main-music-btn" title="Background Music">
            <i class="fas fa-music"></i>
        </div>
        <div class="music-btn" id="flipbook-music-btn" title="Flipbook Music">
            <i class="fas fa-book"></i>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="bg-music" loop>
        <source src="Tu Hi Meri Shab Hai Gangster 320 Kbps.mp33" type="audio/mpeg">
    </audio>
    
    <audio id="flipbook-music" loop>
        <source src="Tu Hi Meri Shab Hai Gangster 320 Kbps.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="page-flip-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-book-page-turn-1381.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="celebration-sound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>

    <script>
        // DOM Elements
        const cinematicOpening = document.getElementById('cinematic-opening');
        const starsContainer = document.getElementById('stars-container');
        const mainContent = document.getElementById('main-content');
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const teddy = document.getElementById('teddy');
        const messageDisplay = document.getElementById('message-display');
        const emotionalPopup = document.getElementById('emotional-popup');
        const popupYesBtn = document.getElementById('popup-yes-btn');
        const popupCloseBtn = document.getElementById('popup-close-btn');
        const celebrationScreen = document.getElementById('celebration-screen');
        const celebrationMessage = document.getElementById('celebration-message');
        const flipbookBtn = document.getElementById('flipbook-btn');
        const flipbookOverlay = document.getElementById('flipbook-overlay');
        const closeFlipbook = document.getElementById('close-flipbook');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');
        const pageIndicator = document.getElementById('page-indicator');
        const autoFlipToggle = document.getElementById('auto-flip-toggle');
        const backToTopBtn = document.getElementById('back-to-top');
        const mainMusicBtn = document.getElementById('main-music-btn');
        const flipbookMusicBtn = document.getElementById('flipbook-music-btn');
        const bgMusic = document.getElementById('bg-music');
        const flipbookMusic = document.getElementById('flipbook-music');
        const pageFlipSound = document.getElementById('page-flip-sound');
        const celebrationSound = document.getElementById('celebration-sound');
        const confettiContainer = document.getElementById('confetti-container');
        const flowersContainer = document.getElementById('flowers-container');
        
        // State variables
        let noClickCount = 0;
        let currentScale = 1;
        let currentPage = 1;
        const totalPages = 10;
        let autoFlipInterval = null;
        let mainMusicPlaying = false;
        let flipbookMusicPlaying = false;
        let firstInteraction = false;
        let currentMusicType = 'main'; // 'main' or 'flipbook'
        
        // Emotional messages for NO button
        const noMessages = [
            "Your comfort matters to me ü§ç",
            "Take your time, I'll wait üïäÔ∏è",
            "Your happiness comes first üòä",
            "I respect your feelings always",
            "I really believe in us ‚ù§Ô∏è",
            "Now teddy is getting sad üêª",
            "Teddy is heartbroken üíî",
            "Now teddy is crying‚Ä¶ please think again üò≠"
        ];
        
        // Teddy reactions based on click count
        const teddyReactions = [
            "üêª",           // 0-1 clicks
            "üêª",           // 1-2 clicks
            "üêªü•∫",         // 3-4 clicks
            "üêªü•∫",         // 3-4 clicks
            "üêªüíî",         // 5-6 clicks
            "üêªüíî",         // 5-6 clicks
            "üêªüò≠",         // 7+ clicks
            "üêªüò≠"          // 7+ clicks
        ];

        // Flower emojis
        const flowers = ["üå∏", "üå∫", "üå∑", "üåπ", "üíê", "ü•Ä", "üåª", "üåº"];

        // Create stars for cinematic opening
        function createStars() {
            const starCount = 150;
            
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // Random position
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                
                // Random size (1-3px)
                const size = Math.random() * 2 + 1;
                
                // Random twinkle delay
                const delay = Math.random() * 5;
                
                star.style.left = `${left}%`;
                star.style.top = `${top}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.animationDelay = `${delay}s`;
                
                starsContainer.appendChild(star);
            }
        }

        // Create flowers animation
        function createFlowers() {
            flowersContainer.innerHTML = '';
            const flowerCount = 30;
            
            for (let i = 0; i < flowerCount; i++) {
                const flower = document.createElement('div');
                flower.classList.add('flower');
                
                // Random flower emoji
                const flowerEmoji = flowers[Math.floor(Math.random() * flowers.length)];
                flower.textContent = flowerEmoji;
                
                // Random position
                const left = Math.random() * 100;
                
                // Random size
                const size = Math.random() * 30 + 20;
                
                // Random animation duration
                const duration = Math.random() * 2 + 3;
                
                // Random delay
                const delay = Math.random() * 2;
                
                flower.style.left = `${left}%`;
                flower.style.fontSize = `${size}px`;
                flower.style.animationDuration = `${duration}s`;
                flower.style.animationDelay = `${delay}s`;
                
                flowersContainer.appendChild(flower);
                
                // Remove flower after animation
                setTimeout(() => {
                    if (flower.parentNode) {
                        flower.parentNode.removeChild(flower);
                    }
                }, (duration + delay) * 1000);
            }
        }

        // Play music based on current context
        function playMusic(type) {
            // Stop any currently playing music
            if (mainMusicPlaying) {
                bgMusic.pause();
                mainMusicPlaying = false;
                mainMusicBtn.classList.remove('active');
            }
            
            if (flipbookMusicPlaying) {
                flipbookMusic.pause();
                flipbookMusicPlaying = false;
                flipbookMusicBtn.classList.remove('active');
            }
            
            // Play the requested music
            if (type === 'main') {
                bgMusic.currentTime = 0;
                bgMusic.play().then(() => {
                    mainMusicPlaying = true;
                    mainMusicBtn.classList.add('active');
                    currentMusicType = 'main';
                }).catch(e => {
                    console.log("Main music play failed:", e);
                });
            } else if (type === 'flipbook') {
                // Continue from current time if already playing before
                if (flipbookMusic.currentTime === 0) {
                    flipbookMusic.currentTime = 0;
                }
                flipbookMusic.play().then(() => {
                    flipbookMusicPlaying = true;
                    flipbookMusicBtn.classList.add('active');
                    currentMusicType = 'flipbook';
                }).catch(e => {
                    console.log("Flipbook music play failed:", e);
                });
            }
        }

        // Toggle music based on context
        function toggleMusic(type) {
            if (!firstInteraction) {
                firstInteraction = true;
                // Try to play music after first user interaction
                bgMusic.volume = 0.3;
                flipbookMusic.volume = 0.3;
                playMusic('main');
                return;
            }
            
            if (type === 'main') {
                if (mainMusicPlaying) {
                    bgMusic.pause();
                    mainMusicPlaying = false;
                    mainMusicBtn.classList.remove('active');
                } else {
                    playMusic('main');
                }
            } else if (type === 'flipbook') {
                if (flipbookMusicPlaying) {
                    flipbookMusic.pause();
                    flipbookMusicPlaying = false;
                    flipbookMusicBtn.classList.remove('active');
                } else {
                    playMusic('flipbook');
                }
            }
        }

        // Scroll to top of page
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show back to top button when scrolling
        function handleScroll() {
            if (window.scrollY > 500) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        }

        // Cinematic opening sequence
        function startCinematicSequence() {
            const texts = document.querySelectorAll('.cinematic-text');
            
            // Show first text after 1 second
            setTimeout(() => {
                texts[0].classList.add('active');
            }, 1000);
            
            // Show second text after 3 seconds
            setTimeout(() => {
                texts[1].classList.add('active');
            }, 3000);
            
            // Show third text after 5 seconds
            setTimeout(() => {
                texts[2].classList.add('active');
            }, 5000);
            
            // Fade out and show main content after 9 seconds
            setTimeout(() => {
                cinematicOpening.style.opacity = '0';
                setTimeout(() => {
                    cinematicOpening.style.display = 'none';
                    mainContent.style.opacity = '1';
                }, 1500);
            }, 9000);
        }

        // Confetti effect
        function createConfetti() {
            confettiContainer.innerHTML = '';
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                // Random color
                const colors = ['#ff69b4', '#ff9fd0', '#ffffff', '#dda0dd', '#ffb6c1', '#96c93d', '#00b09b'];
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                
                // Random position
                confetti.style.left = `${Math.random() * 100}vw`;
                confetti.style.top = `-20px`;
                
                // Random size and shape
                const width = Math.random() * 15 + 5;
                const height = Math.random() * 10 + 5;
                confetti.style.width = `${width}px`;
                confetti.style.height = `${height}px`;
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                
                // Random animation
                const duration = Math.random() * 3 + 2;
                const delay = Math.random() * 1;
                confetti.style.animation = `confetti-fall ${duration}s ease-out ${delay}s forwards`;
                
                // Add keyframes for animation
                if (!document.getElementById('confetti-keyframes')) {
                    const style = document.createElement('style');
                    style.id = 'confetti-keyframes';
                    style.textContent = `
                        @keyframes confetti-fall {
                            0% {
                                opacity: 1;
                                transform: translateY(0) rotate(0deg);
                            }
                            100% {
                                opacity: 0;
                                transform: translateY(100vh) rotate(${Math.random() * 360}deg);
                            }
                        }
                    `;
                    document.head.appendChild(style);
                }
                
                confettiContainer.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.parentNode.removeChild(confetti);
                    }
                }, (duration + delay) * 1000);
            }
        }

        // Handle NO button click
        function handleNoButton() {
            // Increment click count
            noClickCount++;
            
            // Update teddy reaction
            const reactionIndex = Math.min(noClickCount, teddyReactions.length - 1);
            teddy.textContent = teddyReactions[reactionIndex];
            
            // Show message
            const messageIndex = Math.min(noClickCount - 1, noMessages.length - 1);
            messageDisplay.textContent = noMessages[messageIndex];
            messageDisplay.classList.add('show');
            
            // Hide message after 3 seconds
            setTimeout(() => {
                messageDisplay.classList.remove('show');
            }, 3000);
            
            // Make YES button bigger
            if (currentScale < 2.5) {
                currentScale += 0.25;
                yesBtn.style.transform = `scale(${currentScale})`;
            }
            
            // Move NO button randomly
            const maxMove = 150;
            const xMove = (Math.random() * maxMove * 2) - maxMove;
            const yMove = (Math.random() * maxMove * 2) - maxMove;
            noBtn.style.transform = `translate(${xMove}px, ${yMove}px)`;
            
            // Reset NO button position after animation
            setTimeout(() => {
                noBtn.style.transform = 'translate(0, 0)';
            }, 300);
            
            // Show emotional popup after 7-8 clicks
            if (noClickCount >= 7) {
                setTimeout(() => {
                    emotionalPopup.classList.add('active');
                }, 1000);
            }
        }

        // Handle YES button click
        function handleYesButton() {
            // Play celebration sound
            celebrationSound.currentTime = 0;
            celebrationSound.play().catch(e => console.log("Celebration sound play failed:", e));
            
            // Create confetti
            createConfetti();
            
            // Show celebration screen
            celebrationScreen.classList.add('active');
            
            // Add more confetti every 500ms for 3 seconds
            let confettiInterval = setInterval(createConfetti, 500);
            setTimeout(() => {
                clearInterval(confettiInterval);
            }, 3000);
            
            // After 3 seconds, hide the message
            setTimeout(() => {
                celebrationMessage.style.opacity = '0';
            }, 3000);
        }

        // Show flipbook page with enhanced animation
        function showPage(pageNum) {
            // Add page turning animation to current page
            const currentLeftPage = document.querySelector(`#page-${currentPage}`);
            const currentRightPage = document.querySelector(`#page-${currentPage + 1}`);
            
            if (currentLeftPage) currentLeftPage.classList.add('page-turning');
            if (currentRightPage) currentRightPage.classList.add('page-turning');
            
            // Remove page turning animation after it completes
            setTimeout(() => {
                if (currentLeftPage) currentLeftPage.classList.remove('page-turning');
                if (currentRightPage) currentRightPage.classList.remove('page-turning');
            }, 1200);
            
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
                page.style.transform = 'rotateY(0deg)';
                page.style.zIndex = '1';
            });
            
            // Calculate which pages to show
            let leftPage, rightPage;
            
            if (pageNum % 2 === 0) {
                // Even page number - show this page and previous
                leftPage = pageNum - 1;
                rightPage = pageNum;
            } else {
                // Odd page number - show this page and next
                leftPage = pageNum;
                rightPage = pageNum + 1;
            }
            
            // Make sure we don't go out of bounds
            if (leftPage < 1) leftPage = 1;
            if (rightPage > totalPages) rightPage = totalPages;
            
            // Position left page
            const leftPageEl = document.getElementById(`page-${leftPage}`);
            if (leftPageEl) {
                leftPageEl.classList.add('active');
                leftPageEl.style.transform = 'rotateY(0deg)';
                leftPageEl.style.zIndex = '2';
                leftPageEl.style.left = '0';
            }
            
            // Position right page
            const rightPageEl = document.getElementById(`page-${rightPage}`);
            if (rightPageEl) {
                rightPageEl.classList.add('active');
                rightPageEl.style.transform = 'rotateY(0deg)';
                rightPageEl.style.zIndex = '2';
                rightPageEl.style.left = '50%';
            }
            
            currentPage = leftPage;
            
            // Update page indicator
            pageIndicator.textContent = `Page ${leftPage}-${rightPage} of ${totalPages}`;
            pageIndicator.innerHTML = `<i class="fas fa-book-open"></i><span> Page ${leftPage}-${rightPage} of ${totalPages}</span>`;
            
            // Update button states
            prevPageBtn.disabled = currentPage === 1;
            nextPageBtn.disabled = currentPage >= totalPages - 1;
            
            // Play page flip sound
            pageFlipSound.currentTime = 0;
            pageFlipSound.volume = 0.5;
            pageFlipSound.play().catch(e => console.log("Page flip sound play failed:", e));
            
            // On last page, create confetti
            if (leftPage >= totalPages - 1) {
                createConfetti();
            }
        }

        // Open flipbook
        function openFlipbook() {
            celebrationScreen.classList.remove('active');
            flipbookOverlay.classList.add('active');
            showPage(1);
            
            // Switch to flipbook music if it's not already playing
            if (currentMusicType !== 'flipbook') {
                playMusic('flipbook');
            }
        }

        // Close flipbook with flowers effect
        function closeFlipbookWithFlowers() {
            // Create flowers animation
            createFlowers();
            
            // Hide flipbook
            flipbookOverlay.classList.remove('active');
            
            // Stop auto flip if active
            if (autoFlipInterval) {
                clearInterval(autoFlipInterval);
                autoFlipInterval = null;
                autoFlipToggle.classList.remove('active');
            }
            
            // Switch back to main music
            if (currentMusicType === 'flipbook') {
                playMusic('main');
            }
            
            // Scroll to top after a short delay
            setTimeout(() => {
                scrollToTop();
            }, 1000);
        }

        // Toggle auto flip
        function toggleAutoFlip() {
            autoFlipToggle.classList.toggle('active');
            
            if (autoFlipToggle.classList.contains('active')) {
                // Start auto flip
                autoFlipInterval = setInterval(() => {
                    if (currentPage < totalPages - 1) {
                        showPage(currentPage + 2);
                    } else {
                        // If at end, go back to beginning
                        showPage(1);
                    }
                }, 4000); // Flip every 4 seconds
            } else {
                // Stop auto flip
                if (autoFlipInterval) {
                    clearInterval(autoFlipInterval);
                    autoFlipInterval = null;
                }
            }
        }

        // Initialize everything
        function init() {
            // Create stars
            createStars();
            
            // Start cinematic sequence
            startCinematicSequence();
            
            // Set initial music volumes
            bgMusic.volume = 0.3;
            flipbookMusic.volume = 0.3;
            pageFlipSound.volume = 0.5;
            celebrationSound.volume = 0.5;
            
            // Event listeners
            yesBtn.addEventListener('click', handleYesButton);
            
            noBtn.addEventListener('click', handleNoButton);
            
            popupYesBtn.addEventListener('click', () => {
                emotionalPopup.classList.remove('active');
                handleYesButton();
            });
            
            popupCloseBtn.addEventListener('click', () => {
                emotionalPopup.classList.remove('active');
            });
            
            flipbookBtn.addEventListener('click', openFlipbook);
            
            closeFlipbook.addEventListener('click', closeFlipbookWithFlowers);
            
            prevPageBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    showPage(currentPage - 2);
                }
            });
            
            nextPageBtn.addEventListener('click', () => {
                if (currentPage < totalPages - 1) {
                    showPage(currentPage + 2);
                }
            });
            
            autoFlipToggle.addEventListener('click', toggleAutoFlip);
            
            backToTopBtn.addEventListener('click', scrollToTop);
            
            mainMusicBtn.addEventListener('click', () => toggleMusic('main'));
            flipbookMusicBtn.addEventListener('click', () => toggleMusic('flipbook'));
            
            // Scroll event listener
            window.addEventListener('scroll', handleScroll);
            
            // Add click anywhere to start music for browsers that block autoplay
            document.addEventListener('click', () => {
                if (!firstInteraction) {
                    firstInteraction = true;
                    playMusic('main');
                }
            }, { once: true });
            
            // Keyboard navigation for flipbook
            document.addEventListener('keydown', (e) => {
                if (flipbookOverlay.classList.contains('active')) {
                    if (e.key === 'ArrowLeft' && currentPage > 1) {
                        showPage(currentPage - 2);
                    } else if (e.key === 'ArrowRight' && currentPage < totalPages - 1) {
                        showPage(currentPage + 2);
                    } else if (e.key === 'Escape') {
                        closeFlipbookWithFlowers();
                    }
                }
            });
            
            // Initialize page display
            showPage(1);
        }

        // Start the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
